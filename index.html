<!--
    Этот скрипт является собственностью iamst4rk.
    https://iamst4rk.ru/

    *За удаление этого комментария вы можете лишиться лицензии.*
-->
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="refresh" content="10;url=http://iamst4rk.github.io/404.html" />
    <link rel="stylesheet" href="/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    <style>
        p {
            font-size: 40px;
            margin: 0;
            letter-spacing: 3px;
        }
    </style>
    <link rel="site icon" href="images/site_icon.jpg" />
    <link href="css/css.css" rel="stylesheet">
    <title>iamst4rk</title>
    <style></style>
    <link rel="stylesheet" type="text/css.css" href="chrome-extension://ldbfffpdfgghehkkckifnjhoncdgjkib/styles.css">
    <link rel="stylesheet" href="css/style.css" />
</head>



<body oncontextmenu="return false;" unselectable="on" onselectstart="return false;"><canvas width="1920" height="937"></canvas>
    <audio id="audio" preload="" autoplay="" loop="">
    <source type="audio/mp3" src="music.mp3">
        <script src="js/timer.js"></script>
  </audio>
    <style>
        img[src*=""] {
            display: none;
        }
    </style>
    <scrip type="text/javascript">
        window.onkeydown = function(evt) { if (evt.keyCode == 123 || evt.keyCode == 85 || evt.keyCode == 17 || evt.keyCode == 16 || evt.keyCode == 74 || evt.keyCode == 116 || evt.keyCode == 73) return false; }; window.onkeypress = function(evt) { if (evt.keyCode
        == 123 || evt.keyCode == 85 || evt.keyCode == 17 || evt.keyCode == 16 || evt.keyCode == 74 || evt.keyCode == 116 || evt.keyCode == 73) return false; }; function disableF5(e) { if ((e.which || e.keyCode) == 116) e.preventDefault(); }; $(document).on("keydown",
        disableF5);
    </scrip>
    <style>
        body {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            -o-user-select: none;
            user-select: none;
        }
        
        a {
            color: inherit;
            text-decoration: none !important;
        }
        
        .center {
            font-family: 'Montserrat', sans-serif;
            position: fixed;
            /* or absolute */
            top: 50%;
            left: 50%;
            /* bring your own prefixes */
            transform: translate(-50%, -50%);
            animation: fadein 5s;
            -moz-animation: fadein 5s;
            /* Firefox */
            -webkit-animation: fadein 5s;
            /* Safari and Chrome */
            -o-animation: fadein 5s;
            /* Opera */
        }
        
        @keyframes fadein {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @-moz-keyframes fadein {
            /* Firefox */
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @-webkit-keyframes fadein {
            /* Safari and Chrome */
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @-o-keyframes fadein {
            /* Opera */
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
    </style>


    <div class="center">
        <a href="https://t.me/iamst4rk" target="_blank" rel="noopener noreferrer">
            <h1>t.me/iamst4rk</h1>
        </a>

        <center>
            <svg id="logo" width="686" height="116" viewBox="0 0 686 116" fill="none" xmlns="http://www.w3.org/2000/svg">
                <mask id="path-1-outside-1" maskUnits="userSpaceOnUse" x="0.0880127" y="0.895996" width="686" height="115" fill="black">
                <rect fill="white" x="0.0880127" y="0.895996" width="686" height="115"/>
                <path d="M18.192 8.632V109H5.08801V8.632H18.192Z"/>
                <path d="M99.8535 86.68H56.0775L48.0135 109H34.1895L70.4775 9.208H85.5975L121.742 109H107.918L99.8535 86.68ZM96.1095 76.024L77.9655 25.336L59.8215 76.024H96.1095Z"/>
                <path d="M239.365 9.352V109H226.261V34.696L193.141 109H183.925L150.661 34.552V109H137.557V9.352H151.669L188.533 91.72L225.397 9.352H239.365Z"/>
                <path d="M293.412 110.008C286.788 110.008 280.836 108.856 275.556 106.552C270.372 104.152 266.292 100.888 263.316 96.76C260.34 92.536 258.804 87.688 258.708 82.216H272.676C273.156 86.92 275.076 90.904 278.436 94.168C281.892 97.336 286.884 98.92 293.412 98.92C299.652 98.92 304.548 97.384 308.1 94.312C311.748 91.144 313.572 87.112 313.572 82.216C313.572 78.376 312.516 75.256 310.404 72.856C308.292 70.456 305.652 68.632 302.484 67.384C299.316 66.136 295.044 64.792 289.668 63.352C283.044 61.624 277.716 59.896 273.684 58.168C269.748 56.44 266.34 53.752 263.46 50.104C260.676 46.36 259.284 41.368 259.284 35.128C259.284 29.656 260.676 24.808 263.46 20.584C266.244 16.36 270.132 13.096 275.124 10.792C280.212 8.48799 286.02 7.33599 292.548 7.33599C301.956 7.33599 309.636 9.688 315.588 14.392C321.636 19.096 325.044 25.336 325.812 33.112H311.412C310.932 29.272 308.916 25.912 305.364 23.032C301.812 20.056 297.108 18.568 291.252 18.568C285.78 18.568 281.316 20.008 277.86 22.888C274.404 25.672 272.676 29.608 272.676 34.696C272.676 38.344 273.684 41.32 275.7 43.624C277.812 45.928 280.356 47.704 283.332 48.952C286.404 50.104 290.676 51.448 296.148 52.984C302.772 54.808 308.1 56.632 312.132 58.456C316.164 60.184 319.62 62.92 322.5 66.664C325.38 70.312 326.82 75.304 326.82 81.64C326.82 86.536 325.524 91.144 322.932 95.464C320.34 99.784 316.5 103.288 311.412 105.976C306.324 108.664 300.324 110.008 293.412 110.008Z"/>
                <path d="M407.88 8.632V19.288H380.52V109H367.416V19.288H339.912V8.632H407.88Z"/>
                <path d="M418.682 85.816V75.88L469.226 5.896H484.922V74.44H499.322V85.816H484.922V109H471.962V85.816H418.682ZM472.538 19.576L433.802 74.44H472.538V19.576Z"/>
                <path d="M567.42 109L543.516 67.96H527.676V109H514.572V8.632H546.972C554.556 8.632 560.94 9.928 566.124 12.52C571.404 15.112 575.34 18.616 577.932 23.032C580.524 27.448 581.82 32.488 581.82 38.152C581.82 45.064 579.804 51.16 575.772 56.44C571.836 61.72 565.884 65.224 557.916 66.952L583.116 109H567.42ZM527.676 57.448H546.972C554.076 57.448 559.404 55.72 562.956 52.264C566.508 48.712 568.284 44.008 568.284 38.152C568.284 32.2 566.508 27.592 562.956 24.328C559.5 21.064 554.172 19.432 546.972 19.432H527.676V57.448Z"/>
                <path d="M656.614 109L615.286 63.208V109H602.182V8.632H615.286V55.144L656.758 8.632H673.318L627.814 58.888L673.75 109H656.614Z"/>
                </mask>
                <path d="M18.192 8.632V109H5.08801V8.632H18.192Z" stroke="white" stroke-width="10" mask="url(#path-1-outside-1)"/>
                <path d="M99.8535 86.68H56.0775L48.0135 109H34.1895L70.4775 9.208H85.5975L121.742 109H107.918L99.8535 86.68ZM96.1095 76.024L77.9655 25.336L59.8215 76.024H96.1095Z" stroke="white" stroke-width="10" mask="url(#path-1-outside-1)"/>
                <path d="M239.365 9.352V109H226.261V34.696L193.141 109H183.925L150.661 34.552V109H137.557V9.352H151.669L188.533 91.72L225.397 9.352H239.365Z" stroke="white" stroke-width="10" mask="url(#path-1-outside-1)"/>
                <path d="M293.412 110.008C286.788 110.008 280.836 108.856 275.556 106.552C270.372 104.152 266.292 100.888 263.316 96.76C260.34 92.536 258.804 87.688 258.708 82.216H272.676C273.156 86.92 275.076 90.904 278.436 94.168C281.892 97.336 286.884 98.92 293.412 98.92C299.652 98.92 304.548 97.384 308.1 94.312C311.748 91.144 313.572 87.112 313.572 82.216C313.572 78.376 312.516 75.256 310.404 72.856C308.292 70.456 305.652 68.632 302.484 67.384C299.316 66.136 295.044 64.792 289.668 63.352C283.044 61.624 277.716 59.896 273.684 58.168C269.748 56.44 266.34 53.752 263.46 50.104C260.676 46.36 259.284 41.368 259.284 35.128C259.284 29.656 260.676 24.808 263.46 20.584C266.244 16.36 270.132 13.096 275.124 10.792C280.212 8.48799 286.02 7.33599 292.548 7.33599C301.956 7.33599 309.636 9.688 315.588 14.392C321.636 19.096 325.044 25.336 325.812 33.112H311.412C310.932 29.272 308.916 25.912 305.364 23.032C301.812 20.056 297.108 18.568 291.252 18.568C285.78 18.568 281.316 20.008 277.86 22.888C274.404 25.672 272.676 29.608 272.676 34.696C272.676 38.344 273.684 41.32 275.7 43.624C277.812 45.928 280.356 47.704 283.332 48.952C286.404 50.104 290.676 51.448 296.148 52.984C302.772 54.808 308.1 56.632 312.132 58.456C316.164 60.184 319.62 62.92 322.5 66.664C325.38 70.312 326.82 75.304 326.82 81.64C326.82 86.536 325.524 91.144 322.932 95.464C320.34 99.784 316.5 103.288 311.412 105.976C306.324 108.664 300.324 110.008 293.412 110.008Z" stroke="white" stroke-width="10" mask="url(#path-1-outside-1)"/>
                <path d="M407.88 8.632V19.288H380.52V109H367.416V19.288H339.912V8.632H407.88Z" stroke="white" stroke-width="10" mask="url(#path-1-outside-1)"/>
                <path d="M418.682 85.816V75.88L469.226 5.896H484.922V74.44H499.322V85.816H484.922V109H471.962V85.816H418.682ZM472.538 19.576L433.802 74.44H472.538V19.576Z" stroke="white" stroke-width="10" mask="url(#path-1-outside-1)"/>
                <path d="M567.42 109L543.516 67.96H527.676V109H514.572V8.632H546.972C554.556 8.632 560.94 9.928 566.124 12.52C571.404 15.112 575.34 18.616 577.932 23.032C580.524 27.448 581.82 32.488 581.82 38.152C581.82 45.064 579.804 51.16 575.772 56.44C571.836 61.72 565.884 65.224 557.916 66.952L583.116 109H567.42ZM527.676 57.448H546.972C554.076 57.448 559.404 55.72 562.956 52.264C566.508 48.712 568.284 44.008 568.284 38.152C568.284 32.2 566.508 27.592 562.956 24.328C559.5 21.064 554.172 19.432 546.972 19.432H527.676V57.448Z" stroke="white" stroke-width="10" mask="url(#path-1-outside-1)"/>
                <path d="M656.614 109L615.286 63.208V109H602.182V8.632H615.286V55.144L656.758 8.632H673.318L627.814 58.888L673.75 109H656.614Z" stroke="white" stroke-width="10" mask="url(#path-1-outside-1)"/>
                </svg>
            <script src="js/app.js"></script>
            <!-- <script>
                let box = document.querySelector('.box');
                let shadow = '';
                for (var i = 0; i < 500; i++) {
                    shadow += (shadow ? ',' : '') + i * 1 + 'px' + i * 1 + 'px 0 #e8305b'
                }
                box.style.boxShadow = shadow;
            </script> -->
            <!-- <p class="box">iamst4rk</p> -->
            <div style="letter-spacing: 3;font-size: 15;">
                <div id="center">
                    <div class="animated fadeInDown"></div>

                    <div class="animated fadeInUp">
                        <pre></pre>
                        <!-- <pre> <pre align="middle"> <a href="https://t.me/iamst4rk" href="/images/telegram-icon.png" target="_blank">  <i class="fab fa-telegram-plane"></i>  </a>  -->
                        <!-- <a href="https://www.discord.gg/agQmMJYVer" target="_blank"><i class="fab fa-discord"></i> </a>  <a href="https://www.donationalerts.com/r/iamst4rk" target="_blank"> <i class="fas fa-wallet"></i></a>  <a href="https://twitch.tv/iamst4rk" target="_blank"><i class="fas fa-server"></i></a>  -->
                        <!-- </pre></pre> -->
                        <center>
                            <div id="clockDisplay" class="clockStyle">00:00:00 </div>
                        </center>
                        <script>
                            function renderTime() {
                                var currentTime = new Date();
                                var diem = "AM";
                                var h = currentTime.getHours();
                                var m = currentTime.getMinutes();
                                var s = currentTime.getSeconds();
                                setTimeout('renderTime()', 1000);
                                if (h == 0) {
                                    h = 12;
                                } else if (h > 12) {
                                    h =
                                        h - 12;
                                    diem = "PM";
                                }
                                if (h <
                                    10) {
                                    h = "0" + h;
                                }
                                if (m < 10) {
                                    m = "0" + m;
                                }
                                if (s < 10) {
                                    s = "0" + s;
                                }
                                var myClock = document.getElementById('clockDisplay');
                                myClock.textContent = h + ":" + m + ":" + s + " " + diem;
                                myClock.innerText = h + ":" + m + ":" + s + " " + diem;
                            }
                            renderTime();
                        </script>
                    </div>
                </div>
            </div>
            <br>
            <!--div id="pp" style="cursor: pointer; letter-spacing: 2px; font-size: 14px;" onclick="pVid();">PLAY/QUEUE </div-->
            <!-- <div id="pp" style="cursor: pointer; letter-spacing: 2px; font-size: 14px;" onclick="pVid();"><i class="fas fa-play"></i></div> -->
        </center>
    </div>
    <scrip type="text/javascript">
        var audio = document.getElementById("audio"); function pVid() { audio.paused ? audio.play() : audio.pause(); }
    </scrip>

    <style>
        html,
        body {
            overflow: hidden;
            color: #fefeff;
        }
        
        body {
            margin: 0;
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        canvas {
            width: 100%;
            height: 100%;
            z-index: -999999999;
        }
        
        [class^="letter"] {
            -webkit-transition: opacity 3s ease;
            -moz-transition: opacity 3s ease;
            transition: opacity 3s ease;
        }
        
        .letter-0 {
            transition-delay: 0.2s;
        }
        
        .letter-1 {
            transition-delay: 0.4s;
        }
        
        .letter-2 {
            transition-delay: 0.6s;
        }
        
        .letter-3 {
            transition-delay: 0.8s;
        }
        
        .letter-4 {
            transition-delay: 1.0s;
        }
        
        .letter-5 {
            transition-delay: 1.2s;
        }
        
        .letter-6 {
            transition-delay: 1.4s;
        }
        
        .letter-7 {
            transition-delay: 1.6s;
        }
        
        .letter-8 {
            transition-delay: 1.8s;
        }
        
        .letter-9 {
            transition-delay: 2.0s;
        }
        
        .letter-10 {
            transition-delay: 2.2s;
        }
        
        .letter-11 {
            transition-delay: 2.4s;
        }
        
        .letter-12 {
            transition-delay: 2.6s;
        }
        
        .letter-13 {
            transition-delay: 2.8s;
        }
        
        .letter-14 {
            transition-delay: 3.0s;
        }
        
        .letter-15 {
            transition-delay: 3.2s;
        }
    </style>
    <script>
        'use strict';
        var canvas = document.getElementsByTagName('canvas')[0];
        canvas.width = canvas.clientWidth;
        canvas.height = canvas.clientHeight;
        var config = {
            TEXTURE_DOWNSAMPLE: 1,
            DENSITY_DISSIPATION: 0.98,
            VELOCITY_DISSIPATION: 0.99,
            PRESSURE_DISSIPATION: 0.8,
            PRESSURE_ITERATIONS: 25,
            CURL: 30,
            SPLAT_RADIUS: 0.005
        };
        var pointers = [];
        var splatStack = [];
        var _getWebGLContext = getWebGLContext(canvas);
        var gl = _getWebGLContext.gl;
        var ext = _getWebGLContext.ext;
        var support_linear_float = _getWebGLContext.support_linear_float;

        function getWebGLContext(canvas) {
            var params = {
                alpha: false,
                depth: false,
                stencil: false,
                antialias: false
            };
            var gl = canvas.getContext('webgl2', params);
            var isWebGL2 = !!gl;
            if (!isWebGL2) gl = canvas.getContext('webgl', params) || canvas.getContext('experimental-webgl',
                params);
            var halfFloat = gl.getExtension('OES_texture_half_float');
            var support_linear_float = gl.getExtension('OES_texture_half_float_linear');
            if (isWebGL2) {
                gl.getExtension('EXT_color_buffer_float');
                support_linear_float = gl.getExtension('OES_texture_float_linear');
            }
            gl.clearColor(0.0, 0.0, 0.0, 1.0);
            var internalFormat = isWebGL2 ? gl.RGBA16F : gl.RGBA;
            var internalFormatRG = isWebGL2 ? gl.RG16F : gl.RGBA;
            var formatRG = isWebGL2 ? gl.RG : gl.RGBA;
            var texType = isWebGL2 ? gl.HALF_FLOAT : halfFloat.HALF_FLOAT_OES;
            return {
                gl: gl,
                ext: {
                    internalFormat: internalFormat,
                    internalFormatRG: internalFormatRG,
                    formatRG: formatRG,
                    texType: texType
                },
                support_linear_float: support_linear_float
            };
        }

        function pointerPrototype() {
            this.id = -1;
            this.x = 0;
            this.y = 0;
            this.dx = 0;
            this.dy = 0;
            this.down = false;
            this.moved = false;
            this.color = [30, 0, 300];
        }
        pointers.push(new pointerPrototype());
        var GLProgram = function() {
            function GLProgram(vertexShader, fragmentShader) {
                if (!(this instanceof GLProgram))
                    throw new TypeError("Cannot call a class as a function");
                this.uniforms = {};
                this.program = gl.createProgram();
                gl.attachShader(this.program, vertexShader);
                gl.attachShader(this.program, fragmentShader);
                gl.linkProgram(this.program);
                if (!gl.getProgramParameter(this.program,
                        gl.LINK_STATUS)) throw gl.getProgramInfoLog(this.program);
                var uniformCount = gl.getProgramParameter(this.program, gl.ACTIVE_UNIFORMS);
                for (var i = 0; i <
                    uniformCount; i++) {
                    var uniformName = gl.getActiveUniform(this.program, i).name;
                    this.uniforms[uniformName] = gl.getUniformLocation(this.program, uniformName);
                }
            }
            GLProgram.prototype.bind = function bind() {
                gl.useProgram(this.program);
            };
            return GLProgram;
        }();

        function compileShader(type, source) {
            var shader = gl.createShader(type);
            gl.shaderSource(shader, source);
            gl.compileShader(shader);
            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) throw gl.getShaderInfoLog(shader);
            return shader;
        }
        var baseVertexShader = compileShader(gl.VERTEX_SHADER,
            'precision highp float; precision mediump sampler2D; attribute vec2 aPosition; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform vec2 texelSize; void main () {     vUv = aPosition * 0.5 + 0.5;     vL = vUv - vec2(texelSize.x, 0.0);     vR = vUv + vec2(texelSize.x, 0.0);     vT = vUv + vec2(0.0, texelSize.y);     vB = vUv - vec2(0.0, texelSize.y);     gl_Position = vec4(aPosition, 0.0, 1.0); }');
        var clearShader = compileShader(gl.FRAGMENT_SHADER,
            'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uTexture; uniform float value; void main () {     gl_FragColor = value * texture2D(uTexture, vUv); }');
        var displayShader = compileShader(gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uTexture; void main () {     gl_FragColor = texture2D(uTexture, vUv); }');
        var splatShader = compileShader(gl.FRAGMENT_SHADER,
            'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uTarget; uniform float aspectRatio; uniform vec3 color; uniform vec2 point; uniform float radius; void main () {     vec2 p = vUv - point.xy;     p.x *= aspectRatio;     vec3 splat = exp(-dot(p, p) / radius) * color;     vec3 base = texture2D(uTarget, vUv).xyz;     gl_FragColor = vec4(base + splat, 1.0); }');
        var advectionManualFilteringShader = compileShader(gl.FRAGMENT_SHADER,
            'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uVelocity; uniform sampler2D uSource; uniform vec2 texelSize; uniform float dt; uniform float dissipation; vec4 bilerp (in sampler2D sam, in vec2 p) {     vec4 st;     st.xy = floor(p - 0.5) + 0.5;     st.zw = st.xy + 1.0;     vec4 uv = st * texelSize.xyxy;     vec4 a = texture2D(sam, uv.xy);     vec4 b = texture2D(sam, uv.zy);     vec4 c = texture2D(sam, uv.xw);     vec4 d = texture2D(sam, uv.zw);     vec2 f = p - st.xy;     return mix(mix(a, b, f.x), mix(c, d, f.x), f.y); } void main () {     vec2 coord = gl_FragCoord.xy - dt * texture2D(uVelocity, vUv).xy;     gl_FragColor = dissipation * bilerp(uSource, coord);     gl_FragColor.a = 1.0; }');
        var advectionShader = compileShader(gl.FRAGMENT_SHADER,
            'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uVelocity; uniform sampler2D uSource; uniform vec2 texelSize; uniform float dt; uniform float dissipation; void main () {     vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;     gl_FragColor = dissipation * texture2D(uSource, coord); }');
        var divergenceShader = compileShader(gl.FRAGMENT_SHADER,
            'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uVelocity; vec2 sampleVelocity (in vec2 uv) {     vec2 multiplier = vec2(1.0, 1.0);     if (uv.x < 0.0) { uv.x = 0.0; multiplier.x = -1.0; }     if (uv.x > 1.0) { uv.x = 1.0; multiplier.x = -1.0; }     if (uv.y < 0.0) { uv.y = 0.0; multiplier.y = -1.0; }     if (uv.y > 1.0) { uv.y = 1.0; multiplier.y = -1.0; }     return multiplier * texture2D(uVelocity, uv).xy; } void main () {     float L = sampleVelocity(vL).x;     float R = sampleVelocity(vR).x;     float T = sampleVelocity(vT).y;     float B = sampleVelocity(vB).y;     float div = 0.5 * (R - L + T - B);     gl_FragColor = vec4(div, 0.0, 0.0, 1.0); }');
        var curlShader = compileShader(gl.FRAGMENT_SHADER,
            'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uVelocity; void main () {     float L = texture2D(uVelocity, vL).y;     float R = texture2D(uVelocity, vR).y;     float T = texture2D(uVelocity, vT).x;     float B = texture2D(uVelocity, vB).x;     float vorticity = R - L - T + B;     gl_FragColor = vec4(vorticity, 0.0, 0.0, 1.0); }');
        var vorticityShader = compileShader(gl.FRAGMENT_SHADER,
            'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uVelocity; uniform sampler2D uCurl; uniform float curl; uniform float dt; void main () {     float L = texture2D(uCurl, vL).y;     float R = texture2D(uCurl, vR).y;     float T = texture2D(uCurl, vT).x;     float B = texture2D(uCurl, vB).x;     float C = texture2D(uCurl, vUv).x;     vec2 force = vec2(abs(T) - abs(B), abs(R) - abs(L));     force *= 1.0 / length(force + 0.00001) * curl * C;     vec2 vel = texture2D(uVelocity, vUv).xy;     gl_FragColor = vec4(vel + force * dt, 0.0, 1.0); }');
        var pressureShader = compileShader(gl.FRAGMENT_SHADER,
            'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uPressure; uniform sampler2D uDivergence; vec2 boundary (in vec2 uv) {     uv = min(max(uv, 0.0), 1.0);     return uv; } void main () {     float L = texture2D(uPressure, boundary(vL)).x;     float R = texture2D(uPressure, boundary(vR)).x;     float T = texture2D(uPressure, boundary(vT)).x;     float B = texture2D(uPressure, boundary(vB)).x;     float C = texture2D(uPressure, vUv).x;     float divergence = texture2D(uDivergence, vUv).x;     float pressure = (L + R + B + T - divergence) * 0.25;     gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0); }');
        var gradientSubtractShader = compileShader(gl.FRAGMENT_SHADER,
            'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uPressure; uniform sampler2D uVelocity; vec2 boundary (in vec2 uv) {     uv = min(max(uv, 0.0), 1.0);     return uv; } void main () {     float L = texture2D(uPressure, boundary(vL)).x;     float R = texture2D(uPressure, boundary(vR)).x;     float T = texture2D(uPressure, boundary(vT)).x;     float B = texture2D(uPressure, boundary(vB)).x;     vec2 velocity = texture2D(uVelocity, vUv).xy;     velocity.xy -= vec2(R - L, T - B);     gl_FragColor = vec4(velocity, 0.0, 1.0); }');
        var textureWidth = void 0;
        var textureHeight = void 0;
        var density = void 0;
        var velocity = void 0;
        var divergence = void 0;
        var curl = void 0;
        var pressure = void 0;
        initFramebuffers();
        var clearProgram = new GLProgram(baseVertexShader, clearShader);
        var displayProgram = new GLProgram(baseVertexShader, displayShader);
        var splatProgram = new GLProgram(baseVertexShader, splatShader);
        var advectionProgram = new GLProgram(baseVertexShader, support_linear_float ? advectionShader : advectionManualFilteringShader);
        var divergenceProgram = new GLProgram(baseVertexShader, divergenceShader);
        var curlProgram = new GLProgram(baseVertexShader, curlShader);
        var vorticityProgram = new GLProgram(baseVertexShader, vorticityShader);
        var pressureProgram = new GLProgram(baseVertexShader,
            pressureShader);
        var gradienSubtractProgram = new GLProgram(baseVertexShader, gradientSubtractShader);

        function initFramebuffers() {
            textureWidth = gl.drawingBufferWidth >> config.TEXTURE_DOWNSAMPLE;
            textureHeight = gl.drawingBufferHeight >> config.TEXTURE_DOWNSAMPLE;
            var iFormat = ext.internalFormat;
            var iFormatRG = ext.internalFormatRG;
            var formatRG = ext.formatRG;
            var texType = ext.texType;
            density = createDoubleFBO(0,
                textureWidth, textureHeight, iFormat, gl.RGBA, texType, support_linear_float ? gl.LINEAR : gl.NEAREST);
            velocity = createDoubleFBO(2, textureWidth, textureHeight, iFormatRG, formatRG, texType, support_linear_float ? gl.LINEAR : gl.NEAREST);
            divergence = createFBO(4, textureWidth, textureHeight, iFormatRG, formatRG, texType, gl.NEAREST);
            curl = createFBO(5, textureWidth, textureHeight, iFormatRG, formatRG, texType, gl.NEAREST);
            pressure = createDoubleFBO(6, textureWidth, textureHeight,
                iFormatRG, formatRG, texType, gl.NEAREST);
        }

        function createFBO(texId, w, h, internalFormat, format, type, param) {
            gl.activeTexture(gl.TEXTURE0 + texId);
            var texture = gl.createTexture();
            gl.bindTexture(gl.TEXTURE_2D, texture);
            gl.texParameteri(gl.TEXTURE_2D,
                gl.TEXTURE_MIN_FILTER, param);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, param);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
            gl.texImage2D(gl.TEXTURE_2D,
                0, internalFormat, w, h, 0, format, type, null);
            var fbo = gl.createFramebuffer();
            gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);
            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);
            gl.viewport(0, 0, w, h);
            gl.clear(gl.COLOR_BUFFER_BIT);
            return [texture, fbo, texId];
        }

        function createDoubleFBO(texId, w, h, internalFormat, format, type, param) {
            var fbo1 = createFBO(texId, w, h, internalFormat, format, type, param);
            var fbo2 = createFBO(texId +
                1, w, h, internalFormat, format, type, param);
            return {get first() {
                    return fbo1;
                },
                get second() {
                    return fbo2;
                },
                swap: function swap() {
                    var temp = fbo1;
                    fbo1 = fbo2;
                    fbo2 = temp;
                }
            };
        }
        var blit = function() {
            gl.bindBuffer(gl.ARRAY_BUFFER,
                gl.createBuffer());
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1, -1, -1, 1, 1, 1, 1, -1]), gl.STATIC_DRAW);
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, gl.createBuffer());
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2,
                0, 2, 3
            ]), gl.STATIC_DRAW);
            gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(0);
            return function(destination) {
                gl.bindFramebuffer(gl.FRAMEBUFFER, destination);
                gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT,
                    0);
            };
        }();
        var lastTime = Date.now();
        update();

        function update() {
            resizeCanvas();
            var dt = Math.min((Date.now() - lastTime) / 1000, 0.016);
            lastTime = Date.now();
            gl.viewport(0, 0, textureWidth, textureHeight);
            if (splatStack.length > 0) {
                for (var m = 0; m <
                    splatStack.pop(); m++) {
                    var color = [Math.random() * 10, Math.random() * 10, Math.random() * 10];
                    var x = canvas.width * Math.random();
                    var y = canvas.height * Math.random();
                    var dx = 1000 * (Math.random() - 0.5);
                    var dy = 1000 * (Math.random() - 0.5);
                    splat(x, y, dx, dy, color);
                }
            }
            advectionProgram.bind();
            gl.uniform2f(advectionProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight);
            gl.uniform1i(advectionProgram.uniforms.uVelocity, velocity.first[2]);
            gl.uniform1i(advectionProgram.uniforms.uSource,
                velocity.first[2]);
            gl.uniform1f(advectionProgram.uniforms.dt, dt);
            gl.uniform1f(advectionProgram.uniforms.dissipation, config.VELOCITY_DISSIPATION);
            blit(velocity.second[1]);
            velocity.swap();
            gl.uniform1i(advectionProgram.uniforms.uVelocity,
                velocity.first[2]);
            gl.uniform1i(advectionProgram.uniforms.uSource, density.first[2]);
            gl.uniform1f(advectionProgram.uniforms.dissipation, config.DENSITY_DISSIPATION);
            blit(density.second[1]);
            density.swap();
            for (var i = 0, len = pointers.length; i < len; i++) {
                var pointer = pointers[i];
                if (pointer.moved) {
                    splat(pointer.x, pointer.y, pointer.dx, pointer.dy, pointer.color);
                    pointer.moved = false;
                }
            }
            curlProgram.bind();
            gl.uniform2f(curlProgram.uniforms.texelSize, 1.0 / textureWidth,
                1.0 / textureHeight);
            gl.uniform1i(curlProgram.uniforms.uVelocity, velocity.first[2]);
            blit(curl[1]);
            vorticityProgram.bind();
            gl.uniform2f(vorticityProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight);
            gl.uniform1i(vorticityProgram.uniforms.uVelocity,
                velocity.first[2]);
            gl.uniform1i(vorticityProgram.uniforms.uCurl, curl[2]);
            gl.uniform1f(vorticityProgram.uniforms.curl, config.CURL);
            gl.uniform1f(vorticityProgram.uniforms.dt, dt);
            blit(velocity.second[1]);
            velocity.swap();
            divergenceProgram.bind();
            gl.uniform2f(divergenceProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight);
            gl.uniform1i(divergenceProgram.uniforms.uVelocity, velocity.first[2]);
            blit(divergence[1]);
            clearProgram.bind();
            var pressureTexId = pressure.first[2];
            gl.activeTexture(gl.TEXTURE0 + pressureTexId);
            gl.bindTexture(gl.TEXTURE_2D, pressure.first[0]);
            gl.uniform1i(clearProgram.uniforms.uTexture, pressureTexId);
            gl.uniform1f(clearProgram.uniforms.value, config.PRESSURE_DISSIPATION);
            blit(pressure.second[1]);
            pressure.swap();
            pressureProgram.bind();
            gl.uniform2f(pressureProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight);
            gl.uniform1i(pressureProgram.uniforms.uDivergence, divergence[2]);
            pressureTexId = pressure.first[2];
            gl.activeTexture(gl.TEXTURE0 +
                pressureTexId);
            for (var _i = 0; _i < config.PRESSURE_ITERATIONS; _i++) {
                gl.bindTexture(gl.TEXTURE_2D, pressure.first[0]);
                gl.uniform1i(pressureProgram.uniforms.uPressure, pressureTexId);
                blit(pressure.second[1]);
                pressure.swap();
            }
            gradienSubtractProgram.bind();
            gl.uniform2f(gradienSubtractProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight);
            gl.uniform1i(gradienSubtractProgram.uniforms.uPressure, pressure.first[2]);
            gl.uniform1i(gradienSubtractProgram.uniforms.uVelocity, velocity.first[2]);
            blit(velocity.second[1]);
            velocity.swap();
            gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);
            displayProgram.bind();
            gl.uniform1i(displayProgram.uniforms.uTexture, density.first[2]);
            blit(null);
            requestAnimationFrame(update);
        }

        function splat(x, y, dx, dy, color) {
            splatProgram.bind();
            gl.uniform1i(splatProgram.uniforms.uTarget, velocity.first[2]);
            gl.uniform1f(splatProgram.uniforms.aspectRatio, canvas.width / canvas.height);
            gl.uniform2f(splatProgram.uniforms.point,
                x / canvas.width, 1.0 - y / canvas.height);
            gl.uniform3f(splatProgram.uniforms.color, dx, -dy, 1.0);
            gl.uniform1f(splatProgram.uniforms.radius, config.SPLAT_RADIUS);
            blit(velocity.second[1]);
            velocity.swap();
            gl.uniform1i(splatProgram.uniforms.uTarget,
                density.first[2]);
            gl.uniform3f(splatProgram.uniforms.color, color[0] * 0.3, color[1] * 0.3, color[2] * 0.3);
            blit(density.second[1]);
            density.swap();
        }

        function resizeCanvas() {
            (canvas.width !== canvas.clientWidth || canvas.height !== canvas.clientHeight) &&
            (canvas.width = canvas.clientWidth, canvas.height = canvas.clientHeight, initFramebuffers());
        }
        var count = 0;
        var colorArr = [Math.random() + 0.2, Math.random() + 0.2, Math.random() + 0.2];
        canvas.addEventListener('mousemove', function(e) {
            count++;
            (count > 25) && (colorArr = [Math.random() + 0.2, Math.random() + 0.2, Math.random() + 0.2], count = 0);
            pointers[0].down = true;
            pointers[0].color = colorArr;
            pointers[0].moved = pointers[0].down;
            pointers[0].dx = (e.offsetX - pointers[0].x) * 10.0;
            pointers[0].dy = (e.offsetY - pointers[0].y) * 10.0;
            pointers[0].x = e.offsetX;
            pointers[0].y = e.offsetY;
        });
        canvas.addEventListener('touchmove', function(e) {
            e.preventDefault();
            var touches = e.targetTouches;
            count++;
            (count > 25) &&
            (colorArr = [Math.random() + 0.2, Math.random() + 0.2, Math.random() + 0.2], count = 0);
            for (var i = 0, len = touches.length; i < htmllen; i++) {
                if (i >= pointers.length) pointers.push(new pointerPrototype());
                pointers[i].id = touches[i].identifier;
                pointers[i].down = true;
                pointers[i].x = touches[i].pageX;
                pointers[i].y = touches[i].pageY;
                pointers[i].color = colorArr;
                var pointer =
                    pointers[i];
                pointer.moved = pointer.down;
                pointer.dx = (touches[i].pageX - pointer.x) * 10.0;
                pointer.dy = (touches[i].pageY - pointer.y) * 10.0;
                pointer.x = touches[i].pageX;
                pointer.y = touches[i].pageY;
            }
        }, false);
    </script>
    <!--
    Этот скрипт является собственностью iamst4rk.
    https://iamst4rk.ru/

    *За удаление этого комментария вы можете лишиться лицензии.*
-->
</body>

</html>
